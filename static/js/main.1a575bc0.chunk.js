(this.webpackJsonpreacting=this.webpackJsonpreacting||[]).push([[0],{178:function(t,e,a){t.exports=a(395)},183:function(t,e,a){},199:function(t,e){},201:function(t,e){},233:function(t,e){},234:function(t,e){},278:function(t,e){},280:function(t,e){},303:function(t,e){},394:function(t,e,a){},395:function(t,e,a){"use strict";a.r(e);var n=a(11),r=a.n(n),i=a(166),c=a.n(i),l=(a(183),a(167)),o=a(168),d=a(172),s=a(169),u=a(64),h=a(173),m=a(5),f=a(170),p=a(171),g=a.n(p),b=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(s.a)(e).call(this,t))).state={data:[],width:0,height:100},a.chartRef=r.a.createRef(),a.createGraph=a.createGraph.bind(Object(u.a)(a)),a}return Object(h.a)(e,t),Object(o.a)(e,[{key:"getWidth",value:function(){return document.getElementById("graph").offsetWidth}},{key:"getHeight",value:function(){return document.getElementById("graph").offsetHeight}},{key:"componentDidMount",value:function(){var t,e=this;g.a.init({key:"1nA16yuLtUrdpZFpPzz-HUm-WlpPW2axHhidMOnC1TTQ",callback:function(t){var a=t.Sheet2.elements,n=t.Sheet3.elements;e.setState({data:[a,n],width:e.getWidth(),height:e.getWidth()/2},(function(){e.createGraph()}))},simpleSheet:!1}),window.addEventListener("resize",(function(){clearTimeout(t),t=setTimeout((function(){e.redrawGraph()}),200)}))}},{key:"redrawGraph",value:function(){var t=this.getWidth();this.setState({width:t,height:t/2}),m.k("svg").remove(),this.createGraph=this.createGraph.bind(this),this.createGraph()}},{key:"createGraph",value:function(){var t=0,e=50,a=50,n=0,r=this.state.width-n-e,i=this.state.height-t-a,c=m.k(this.refs.canvas).append("svg").attr("height",i).attr("width",r),l=c.append("g").attr("transform","translate(".concat(n,", ").concat(t,")")),o=m.m("%-m/%-d/%Y %H:%M:%S"),d=this.state.data[0],s=this.state.data[1];d.forEach((function(t){t.date=o(t.Date),t.bilirubin=+t["Bilirubin Total (Calculated)0.2 - 1.2 mg/dL"],t.creatinine=+t["Creatinine0.60 - 1.30 mg/dL"],t.sodium=+t["Na135 - 144 mmol/L"],t.inr=+t["INR 0.9 - 1.1"]})),s.forEach((function(t){t.date=o(t.Date),t.wbc=+t["WBC Count (3.8 - 10.8 Thousand/uL)"]})),d.forEach((function(t){if(t.creatinine>0&&t.bilirubin>0&&t.inr>0){var e=t.creatinine<1?1:t.creatinine,a=t.inr<1?1:t.inr,n=t.bilirubin<1?1:t.bilirubin;t.meld1=10*parseFloat(.957*Math.log(e)+.378*Math.log(n)+1.12*Math.log(a)+.643).toFixed(1)}else t.meld1=0})),d.forEach((function(t){if(t.meld1>11&&t.sodium>0){var e=t.sodium;t.sodium<125?e=125:t.sodium>137&&(e=137),t.meld2=parseFloat((t.meld1+1.32*(137-e)-.033*t.meld1*(137-e)).toFixed(1))}else t.meld2=t.meld1}));var u=m.e(d,(function(t){return t.date})),h=m.e(s,(function(t){return t.date})),p=[m.h([u[0],h[0]]),m.g([u[1],h[1]])],g=m.j().range([0,r]).domain(p),b=m.j().range([0,r]).domain(p),v=m.g(d,(function(t){return t.meld2})),E=m.g(s,(function(t){return t.wbc})),w=m.i().range([i,0]).domain([0,m.g([v,E])]),x=m.a(g),y=m.a(b),k=m.b(w),L=l.append("g").attr("transform","translate(0,"+(i+30)+")").attr("class","context"),M=m.c().extent([[g.range()[0],0],[g.range()[1],i/4]]).on("brush end",(function(){if(m.d.sourceEvent&&"zoom"===m.d.sourceEvent.type)return;var t=m.d.selection||b.range();g.domain(t.map(b.invert,b)),N.select(".meld").attr("d",D),N.select(".meld2").attr("d",D),N.select(".wbc").attr("d",j),N.selectAll("circle").attr("cx",(function(t){return g(t.date)})).attr("cy",(function(t){return w(t.meld2)})),C.select(".axis.x").call(x),l.select(".zoom").call(W.transform,m.o.scale(r/(t[1]-t[0])).translate(-t[0],0))})),W=m.n().scaleExtent([1,1/0]).translateExtent([[0,0],[r,i]]).extent([[0,0],[r,i]]).on("zoom",(function(){if(m.d.sourceEvent&&"brush"===m.d.sourceEvent.type)return;var t=m.d.transform;g.domain(t.rescaleX(b).domain()),N.select(".meld").attr("d",D),N.select(".meld2").attr("d",D),N.select(".wbc").attr("d",j),N.selectAll("circle").attr("cx",(function(t){return g(t.date)})).attr("cy",(function(t){return w(t.meld2)})),C.select(".axis.x").call(x),L.select(".brush").call(M.move,g.range().map(t.invertX,t))})),N=(l.append("defs").append("svg:clipPath").attr("id","clip").append("svg:rect").attr("width",r).attr("height",i).attr("x",0).attr("y",0),l.append("g").attr("class","focus").attr("transform","translate("+n+","+t+")").attr("clip-path","url(#clip)")),C=c.append("g").attr("class","focus").attr("transform","translate("+n+","+t+")");L.append("g").attr("class","x axis1").attr("transform","translate(0,"+i/4+")").call(y),l.append("rect").attr("class","zoom").attr("width",r).attr("height",i).attr("transform","translate("+n+","+t+")").call(W),L.append("g").attr("class","x brush").call(M).call(M.move,g.range()).selectAll("rect").attr("height",i/4).attr("fill","#E6E7E8");var D=m.f().defined((function(t){return t.meld2>0})).x((function(t){return g(t.date)})).y((function(t){return w(t.meld2)})),j=m.f().x((function(t){return g(t.date)})).y((function(t){return w(t.wbc)}));N.append("path").datum(s).classed("line wbc",!0).attr("d",j),N.append("path").datum(d.filter(D.defined())).attr("d",D).style("stroke-dasharray","3, 3").classed("line meld2",!0),N.append("path").datum(d).classed("line meld",!0).attr("d",D),C.append("g").classed("y axis",!0).call(k),C.append("g").classed("x axis",!0).attr("transform","translate(0, "+i+")").call(x);var z=N.selectAll("circle").data(d.filter(D.defined())).enter().append("circle").attr("cx",(function(t){return g(t.date)})).attr("cy",(function(t){return w(t.meld2)})).attr("r","8").attr("fill","gold"),A=m.l("%-m/%-d/%y"),G=Object(f.a)().attr("class","tooltip").offset([50,70]).html((function(t){return"<h4>".concat(A(t.date),": ").concat(t.meld2,"</h4><hr><p>bilirubin: ").concat(t.bilirubin,"<br>creatinine: ").concat(t.creatinine,"<br>INR: ").concat(t.inr,"<br>sodium: ").concat(t.sodium,"</p>")}));l.call(G),z.on("mouseover",(function(t){G.show(t,this)})).on("mouseout",(function(t){G.hide(t)}))}},{key:"render",value:function(){return console.log("updated state ---\x3e",this.state),r.a.createElement("div",{ref:"canvas"})}}]),e}(n.Component);a(394);var v=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"MELD Score Chart")),r.a.createElement("div",{id:"graph"},r.a.createElement(b,null)),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("p",null,"formula source: ",r.a.createElement("a",{href:"https://www.mdcalc.com/meld-score-model-end-stage-liver-disease-12-older#evidence"},"mdcalc")," | raw data: ",r.a.createElement("a",{href:"https://docs.google.com/spreadsheets/d/1nA16yuLtUrdpZFpPzz-HUm-WlpPW2axHhidMOnC1TTQ"},"google sheet"),r.a.createElement("br",null),"MELD(i) = 0.957 \xd7 ln(Cr) + 0.378 \xd7 ln(bilirubin) + 1.120 \xd7 ln(INR) + 0.643 then, round to the tenth decimal place and multiply by 10.",r.a.createElement("br",null),"If MELD(i) > 11, perform additional MELD calculation as follows: MELD = MELD(i) + 1.32 \xd7 (137 \u2013 Na) \u2013  [ 0.033 \xd7 MELD(i) \xd7 (137 \u2013 Na) ]",r.a.createElement("br",null),"Cr, bilirubin and INR values floored to 1; Na floored to 125 and ceilinged to 137.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[178,1,2]]]);
//# sourceMappingURL=main.1a575bc0.chunk.js.map